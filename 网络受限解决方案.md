# ğŸŒ ç½‘ç»œå—é™ç¯å¢ƒ - Android APK æ„å»ºè§£å†³æ–¹æ¡ˆ

## ğŸš¨ å½“å‰é—®é¢˜

**ç—‡çŠ¶**ï¼š
```
âœ… Docker å·²å®‰è£…å¹¶è¿è¡Œ
âœ… é•œåƒåŠ é€Ÿå™¨å·²é…ç½®
âŒ æ— æ³•è¿æ¥ Docker Hub
âŒ æ— æ³•è¿æ¥å›½å†…é•œåƒæº
```

**åŸå› **ï¼šç½‘ç»œç¯å¢ƒå—é™ï¼ˆé˜²ç«å¢™/DNS/ä»£ç†é™åˆ¶ï¼‰

---

## ğŸ¯ è§£å†³æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | éš¾åº¦ | æ—¶é—´ | ç½‘ç»œè¦æ±‚ | æ¨èåº¦ |
|------|------|------|----------|--------|
| **æ–¹æ¡ˆA: GitHub Actions** | â­ | 10åˆ†é’Ÿ | ä½ | â­â­â­â­â­ |
| **æ–¹æ¡ˆB: WSL æ„å»º** | â­â­ | 30åˆ†é’Ÿ | ä¸­ | â­â­â­â­ |
| **æ–¹æ¡ˆC: è·å–é¢„æ„å»ºé•œåƒ** | â­ | 5åˆ†é’Ÿ | ä½ | â­â­â­â­ |
| **æ–¹æ¡ˆD: VPN/ä»£ç†** | â­â­â­ | å˜åŒ–å¤§ | é«˜ | â­â­ |

---

## ğŸš€ æ–¹æ¡ˆA: GitHub Actions äº‘ç«¯æ„å»ºï¼ˆæ¨èï¼‰

**ä¼˜åŠ¿**ï¼š
- âœ… å®Œå…¨åœ¨äº‘ç«¯æ„å»ºï¼Œä¸å—æœ¬åœ°ç½‘ç»œé™åˆ¶
- âœ… å…è´¹ï¼ˆGitHub Actions å…è´¹é¢åº¦å……è¶³ï¼‰
- âœ… è‡ªåŠ¨åŒ–ï¼Œæ¯æ¬¡æ¨é€ä»£ç è‡ªåŠ¨æ„å»º
- âœ… å¯ä¸‹è½½æ„å»ºå¥½çš„ APK

### å®æ–½æ­¥éª¤

#### 1. åˆ›å»º GitHub ä»“åº“

```bash
# 1. åˆå§‹åŒ– gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git init

# 2. æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# 3. æäº¤
git commit -m "Initial commit - HSR Automation"

# 4. åœ¨ GitHub åˆ›å»ºæ–°ä»“åº“
# è®¿é—®: https://github.com/new

# 5. å…³è”è¿œç¨‹ä»“åº“
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/hsr-automation.git

# 6. æ¨é€
git push -u origin main
```

#### 2. åˆ›å»º GitHub Actions å·¥ä½œæµ

åˆ›å»ºæ–‡ä»¶ï¼š`.github/workflows/build-android.yml`

```yaml
name: Build Android APK

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y git zip unzip openjdk-17-jdk autoconf libtool pkg-config zlib1g-dev libncurses5-dev libncursesw5-dev libtinfo5 cmake libffi-dev libssl-dev
        pip install --upgrade pip
        pip install buildozer cython==0.29.33
    
    - name: Build APK with Buildozer
      run: |
        buildozer android debug
    
    - name: Upload APK
      uses: actions/upload-artifact@v3
      with:
        name: hsr-automation-apk
        path: bin/*.apk
```

#### 3. æ¨é€å¹¶è·å– APK

```bash
# 1. æ·»åŠ å·¥ä½œæµæ–‡ä»¶
git add .github/workflows/build-android.yml
git commit -m "Add GitHub Actions build workflow"
git push

# 2. æŸ¥çœ‹æ„å»ºè¿›åº¦
# è®¿é—®: https://github.com/ä½ çš„ç”¨æˆ·å/hsr-automation/actions

# 3. æ„å»ºå®Œæˆåä¸‹è½½ APK
# åœ¨ Actions é¡µé¢ç‚¹å‡»æœ€æ–°çš„æ„å»º â†’ Artifacts â†’ ä¸‹è½½
```

**æ—¶é—´**ï¼šé¦–æ¬¡æ„å»ºçº¦ 15-30 åˆ†é’Ÿ

---

## ğŸ§ æ–¹æ¡ˆB: WSL (Windows Subsystem for Linux) æ„å»º

**ä¼˜åŠ¿**ï¼š
- âœ… æœ¬åœ°æ„å»ºï¼Œå¯ç¦»çº¿
- âœ… æ¯” Docker ç½‘ç»œè¦æ±‚ä½
- âœ… Windows åŸç”Ÿæ”¯æŒ

### å®æ–½æ­¥éª¤

#### 1. å®‰è£… WSL

```powershell
# ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ PowerShell

# å®‰è£… WSL (Ubuntu)
wsl --install

# é‡å¯ç”µè„‘
```

#### 2. é…ç½® WSL ç¯å¢ƒ

```bash
# è¿›å…¥ WSL
wsl

# æ›´æ–°åŒ…ç®¡ç†å™¨
sudo apt update && sudo apt upgrade -y

# å®‰è£…ä¾èµ–
sudo apt install -y git zip unzip openjdk-17-jdk python3-pip \
    autoconf libtool pkg-config zlib1g-dev \
    libncurses5-dev libncursesw5-dev libtinfo5 \
    cmake libffi-dev libssl-dev

# å®‰è£… Buildozer
pip3 install --upgrade pip
pip3 install buildozer cython==0.29.33
```

#### 3. å¤åˆ¶é¡¹ç›®åˆ° WSL

```bash
# åœ¨ WSL ä¸­è®¿é—® Windows æ–‡ä»¶
cd /mnt/d/æ’ä»¶

# æˆ–å¤åˆ¶é¡¹ç›®åˆ° WSL ä¸»ç›®å½•
cp -r /mnt/d/æ’ä»¶ ~/hsr-automation
cd ~/hsr-automation
```

#### 4. æ„å»º APK

```bash
# æ¸…ç†æ—§æ„å»ºï¼ˆå¦‚æœæœ‰ï¼‰
buildozer android clean

# å¼€å§‹æ„å»º
buildozer android debug

# APK ä½ç½®ï¼šbin/hsrautomation-1.0-arm64-v8a-debug.apk
```

#### 5. å¤åˆ¶ APK åˆ° Windows

```bash
# å¤åˆ¶åˆ° Windows
cp bin/*.apk /mnt/d/æ’ä»¶/
```

**æ—¶é—´**ï¼šé¦–æ¬¡æ„å»ºçº¦ 30-60 åˆ†é’Ÿ

---

## ğŸ“¦ æ–¹æ¡ˆC: è·å–é¢„æ„å»º Docker é•œåƒ

**å¦‚æœæœ‰å…¶ä»–ç”µè„‘æˆ–æœ‹å‹å¯ä»¥ä¸‹è½½é•œåƒ**ï¼š

### åœ¨æœ‰ç½‘ç»œçš„ç”µè„‘ä¸Šï¼š

```bash
# 1. ä¸‹è½½é•œåƒ
docker pull ubuntu:22.04

# 2. å¯¼å‡ºé•œåƒ
docker save ubuntu:22.04 -o ubuntu-22.04.tar

# 3. å‹ç¼©ï¼ˆå¯é€‰ï¼‰
gzip ubuntu-22.04.tar
# å¾—åˆ°ï¼šubuntu-22.04.tar.gz (çº¦ 250MB)
```

### åœ¨å½“å‰ç”µè„‘ä¸Šï¼š

```powershell
# 1. è·å–é•œåƒæ–‡ä»¶ï¼ˆUç›˜/ç½‘ç›˜ç­‰ï¼‰

# 2. å¯¼å…¥é•œåƒ
docker load -i ubuntu-22.04.tar

# æˆ–è§£å‹åå¯¼å…¥
# gzip -d ubuntu-22.04.tar.gz
# docker load -i ubuntu-22.04.tar

# 3. éªŒè¯
docker images | findstr ubuntu

# 4. é‡æ–°æ„å»º
.\build_android_auto.bat debug
```

---

## ğŸ”§ æ–¹æ¡ˆD: é…ç½® VPN/ä»£ç†

### Docker Desktop ä»£ç†é…ç½®

1. **æ‰“å¼€ Docker Desktop Settings**

2. **Resources â†’ Proxies**

3. **é…ç½®ä»£ç†**ï¼š
   ```
   Manual proxy configuration
   
   Web Server (HTTP): http://127.0.0.1:ç«¯å£å·
   Secure Web Server (HTTPS): http://127.0.0.1:ç«¯å£å·
   
   â˜‘ Use proxy for DNS queries
   ```

4. **Apply & Restart**

### ç³»ç»Ÿä»£ç†é…ç½®

```powershell
# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆä¸´æ—¶ï¼‰
$env:HTTP_PROXY = "http://127.0.0.1:ç«¯å£å·"
$env:HTTPS_PROXY = "http://127.0.0.1:ç«¯å£å·"

# é‡å¯ Docker Desktop
Restart-Service docker
```

---

## ğŸ“Š æ–¹æ¡ˆé€‰æ‹©å»ºè®®

### ä½ çš„æƒ…å†µï¼šç½‘ç»œä¸¥é‡å—é™

```
æ¨èé¡ºåºï¼š
1. GitHub Actions (æœ€ç®€å•ï¼Œå®Œå…¨äº‘ç«¯)
2. WSL æ„å»º (æœ¬åœ°æ§åˆ¶ï¼Œç½‘ç»œè¦æ±‚è¾ƒä½)
3. è·å–é¢„æ„å»ºé•œåƒ (éœ€è¦å¤–éƒ¨èµ„æº)
4. VPN/ä»£ç† (å¦‚æœæœ‰å¯ç”¨çš„ä»£ç†)
```

### å¿«é€Ÿå†³ç­–æ ‘

```
ä½ æœ‰ GitHub è´¦å·ï¼Ÿ
â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ GitHub Actions â­â­â­â­â­
â””â”€ å¦ â†’ ä½ æ„¿æ„å®‰è£… WSLï¼Ÿ
    â”œâ”€ æ˜¯ â†’ ä½¿ç”¨ WSL æ„å»º â­â­â­â­
    â””â”€ å¦ â†’ ä½ æœ‰å…¶ä»–èƒ½ä¸Šç½‘çš„ç”µè„‘ï¼Ÿ
        â”œâ”€ æ˜¯ â†’ è·å–é¢„æ„å»ºé•œåƒ â­â­â­
        â””â”€ å¦ â†’ å°è¯•é…ç½®ä»£ç† â­â­
```

---

## ğŸ¯ ç«‹å³è¡ŒåŠ¨æ–¹æ¡ˆ

### æœ€å¿«æ–¹æ¡ˆï¼ˆæ¨èï¼‰ï¼šGitHub Actions

**æ­¥éª¤**ï¼ˆ10åˆ†é’Ÿå®Œæˆï¼‰ï¼š

1. **åˆ›å»º GitHub è´¦å·**ï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
   - https://github.com/signup

2. **åˆ›å»ºæ–°ä»“åº“**
   - https://github.com/new
   - ä»“åº“åï¼š`hsr-automation`
   - Public/Private éƒ½å¯ä»¥

3. **ä¸Šä¼ ä»£ç **ï¼š
   ```bash
   # åœ¨é¡¹ç›®ç›®å½•
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/hsr-automation.git
   git push -u origin main
   ```

4. **åˆ›å»ºå·¥ä½œæµæ–‡ä»¶**ï¼š
   - åˆ›å»º `.github/workflows/build-android.yml`
   - å¤åˆ¶ä¸Šé¢çš„ YAML é…ç½®
   - æäº¤å¹¶æ¨é€

5. **ç­‰å¾…æ„å»º**ï¼ˆ15-30åˆ†é’Ÿï¼‰ï¼š
   - è®¿é—®ï¼šhttps://github.com/ä½ çš„ç”¨æˆ·å/hsr-automation/actions
   - æŸ¥çœ‹æ„å»ºè¿›åº¦

6. **ä¸‹è½½ APK**ï¼š
   - æ„å»ºå®Œæˆåï¼Œç‚¹å‡» Artifacts
   - ä¸‹è½½ `hsr-automation-apk.zip`

---

## âš¡ ä¸´æ—¶æ›¿ä»£æ–¹æ¡ˆ

### ä½¿ç”¨åœ¨çº¿ Python ç¯å¢ƒ

**Google Colab**ï¼ˆå…è´¹ï¼‰ï¼š

```python
# åœ¨ Colab notebook ä¸­è¿è¡Œ

# 1. å®‰è£…ä¾èµ–
!apt-get update
!apt-get install -y git zip unzip openjdk-17-jdk
!pip install buildozer cython==0.29.33

# 2. å…‹éš†ä½ çš„é¡¹ç›®
!git clone https://github.com/ä½ çš„ç”¨æˆ·å/hsr-automation.git
%cd hsr-automation

# 3. æ„å»º
!buildozer android debug

# 4. ä¸‹è½½ APK
from google.colab import files
!zip -r apk.zip bin/*.apk
files.download('apk.zip')
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆ Docker é•œåƒæºä¹Ÿè¿ä¸ä¸Šï¼Ÿ

**A**: å¯èƒ½æ˜¯ï¼š
- DNS è¢«é™åˆ¶
- é˜²ç«å¢™æ‹¦æˆª HTTPS
- ä¼ä¸šç½‘ç»œç­–ç•¥

**è§£å†³**: ä½¿ç”¨äº‘ç«¯æ„å»ºï¼ˆGitHub Actionsï¼‰

### Q2: WSL ä¸‹è½½ä¹Ÿå¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ

**A**: é…ç½® WSL ä½¿ç”¨å›½å†…æºï¼š

```bash
# Ubuntu æ¢æº
sudo sed -i 's@archive.ubuntu.com@mirrors.aliyun.com@g' /etc/apt/sources.list
sudo apt update
```

### Q3: GitHub Actions å…è´¹é¢åº¦å¤Ÿç”¨å—ï¼Ÿ

**A**: 
- å…¬å¼€ä»“åº“ï¼šæ— é™åˆ¶
- ç§æœ‰ä»“åº“ï¼šæ¯æœˆ 2000 åˆ†é’Ÿ
- å•æ¬¡æ„å»ºçº¦ 15-30 åˆ†é’Ÿ
- **å®Œå…¨å¤Ÿç”¨ï¼**

---

## ğŸ‰ æˆåŠŸæ ‡å‡†

æ„å»ºæˆåŠŸåï¼Œä½ ä¼šå¾—åˆ°ï¼š

```
bin/hsrautomation-1.0-arm64-v8a-debug.apk
æ–‡ä»¶å¤§å°ï¼šçº¦ 30-50MB
```

å®‰è£…åˆ°æ‰‹æœºï¼š

```bash
adb install bin/hsrautomation-1.0-arm64-v8a-debug.apk
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

**ä½ æƒ³ä½¿ç”¨å“ªä¸ªæ–¹æ¡ˆï¼Ÿ**

A. **GitHub Actions**ï¼ˆæ¨èï¼Œæœ€ç®€å•ï¼‰
B. **WSL æ„å»º**ï¼ˆæœ¬åœ°æ§åˆ¶ï¼‰
C. **è·å–é¢„æ„å»ºé•œåƒ**ï¼ˆéœ€è¦å¸®åŠ©ï¼‰
D. **å…¶ä»–æ–¹æ¡ˆ**

å‘Šè¯‰æˆ‘ä½ çš„é€‰æ‹©ï¼Œæˆ‘ä¼šæä¾›è¯¦ç»†çš„åˆ†æ­¥æŒ‡å¯¼ï¼

